

## 秒杀 高并发需关注的问题：

* 1.单一职责
* 2.秒杀链接加密
    * 随机码，秒杀开始才暴露
* 3.库存预热+快速扣减（redis存储库存信号量，最终正常进入购物车的流量最多是库存数）
    * 按照库存信号量原子扣减
* 4.动静分离
    * nginx/CDN
* 5.恶意请求拦截
    * 网关层按照访问次数拦截脚本请求【异常请求】
* 6.流量错峰
    * 【最重要是体现在秒杀开始的那一刻的错峰】判断登录状态、输入验证码、加入购物车、提交订单
* 7.限流&熔断&降级
    * 前端限流：间隔1秒允许点击
    * 后端限流：
        * 限制[次数：同一个用户10次放行2次
        * 限制总量：秒杀服务峰值处理能力10万，网关层放行不得超过10万，超过的等待两秒放行
    * 熔断：A->B->C，链路中B总是失败，则下次调用时直接返回错误不调用B
    * 降级：流量太大，秒杀模块将流量引导到降级页面，服务繁忙页【正常请求】
* 8.队列削峰（杀手锏）
    * 扣减库存信号量成功的秒杀信息存入队列，订单系统监听队列创建订单（按照自己的处理能力消费）]()